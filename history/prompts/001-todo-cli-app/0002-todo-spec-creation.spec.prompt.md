---
id: 2
title: Todo App Feature Specification Creation
stage: spec
date: 2025-12-30
surface: agent
model: claude-sonnet-4-5-20250929
feature: 001-todo-cli-app
branch: 001-todo-cli-app
user: AKE
command: /sp.specify
labels: [spec, todo-app, Python, CLI]
links:
  spec: specs/001-todo-cli-app/spec.md
  ticket: null
  adr: null
  pr: null
files:
  - specs/001-todo-cli-app/spec.md
  - specs/001-todo-cli-app/checklists/requirements.md
tests:
  - null
---

## Prompt

# SP.SPECIFY Prompt: Todo In-Memory Console App

Build a Python CLI todo app following Spec-Driven Development. All code generated by Claude Code, no manual coding.

## Core Requirements

**Tech Stack:**
- Python 3.13+ with UV package manager
- Rich library for console formatting
- In-memory storage only (no persistence)

**Project Structure:**
```
src/main.py          # Entry point & main loop
src/todo_manager.py  # TodoManager class
src/models.py        # Task dataclass
src/ui.py            # Console UI functions
specs/               # ormat: [âœ“] complete, [ ] incomplete
- Show summary: "Total: X (Y completed, Z incomplete)"
- Empty list: "No tasks found"

### 5. Mark Complete/Incomplete
- Prompt for task ID
- Toggle completed booleThis specification
pyproject.toml       # UV config
README.md            # Setup instructions
CLAUDE.md            # Generation guide
```

## Data Model

Task dataclass with:
- `id`: int (auto-increment from 1)
- `title`: str (required, max 100 chars)
- `description`: str (optional, max 500 chars)
- `completed`: bool (default False)

## Features (5 Total)

### 1. Add Task
- Prompt for title (required, re-prompt if empty)
- Prompt for description (optional)
- Generate unique ID, set completed=False
- Output: "âœ“ Task added successfully! ID: X"

### 2. Delete Task
- Prompt for task ID (validate integer)
- Remove from list if exists
- Output: "âœ“ Task #X deleted" or "Task not found"

### 3. Update Task
- Prompt for task ID
- Show current task details
- Prompt for new title (Enter to skip)
- Prompt for new description (Enter to skip)
- Update only provided fields
- Output: "âœ“ Task #X updated" or "No changes made"

### 4. View All Tasks
- Display rich.table with columns: ID, Title (truncate @40), Description (an
- Output: "âœ“ Task #X marked as complete/incomplete"

### 6. Exit
- Menu option 'q' to quit
- Display: "Thank you for using Todo App. Goodbye!"

## CLI Interface

**Menu (using rich.panel):**
```
â•­â”€â”€â”€ Todo Application â”€â”€â”€â•®
â”‚ 1. Add Task            â”‚
â”‚ 2. Delete Task         â”‚
â”‚ 3. Update Task         â”‚
â”‚ 4. View All Tasks      â”‚
â”‚ 5. Mark Complete       â”‚
â”‚ q. Exit                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
Enter your choice:
```

**Behavior:**
- Clear console after each operation (os.system)
- "Press Enter to continue" after operations
- Re-prompt on invalid menu choice
- Handle Ctrl+C gracefully

## Architecture

**TodoManager class:**
```python
class TodoManager:
    tasks: List[Task] = []
    _next_id: int = 1

    def add_task(title, description) -> (bool, str, Task|None)
    def delete_task(task_id) -> (bool, str)
    def update_task(task_id, title?, description?) -> (bool, str, Task|None)
    def get_all_tasks() -> List[Task]
    def toggle_complete(task_id) -> (bool, str, Task|None)
```

**UI module functions:**
- display_menu(), get_user_choice()
- prompt_for_title(), prompt_for_description(), prompt_for_task_id()
- display_tasks(tasks), display_success/error(message)
- clear_console(), prompt_continue()

## Error Handling

- Non-integer ID input â†’ "Invalid ID format"
- Task not found â†’ "Task with ID X not found"
- Empty title â†’ Re-prompt up to 3 times
- Unexpected errors â†’ Generic message, return to menu
- Never crash, always return to main menu

## Validation Rules

- Strip all string inputs
- Title: not empty after strip, â‰¤100 chars
- Description: â‰¤500 chars (truncate if needed)
- ID: must be integer, must exist in list

## Code Quality

- PEP8 compliant, type hints, Google-style docstrings
- No global variables (use class instances)
- Separate UI from business logic
- Return tuples: (success, message, data?)

## Dependencies (pyproject.toml)

```toml
[project]
name = "todo-app"
version = "1.0.0"
requires-python = ">=3.13"
dependencies = ["rich>=13.7.0"]
```

## Success Criteria

âœ“ All 5 features work without crashes
âœ“ Invalid inputs handled gracefully
âœ“ Rich formatting (tables, colors, symbols)
âœ“ Clean console UX (clear screen, pauses)
âœ“ Type hints and docstrings complete
âœ“ Generated entirely by Claude Code from this spec

---

**Next Steps for SpecKit Plus:**
1. Save this as `specs/v1_specification.md`
2. Initialize UV project structure
3. Generate code in phases: models â†’ manager â†’ UI â†’ main
4. Validate against success criteria
5. Refine spec if generation fails, never code manually

## Response snapshot

I have created the feature specification for the Todo In-Memory Console App. I specialized it for Phase-I (In-memory/CLI). The spec includes user stories for core CRUD operations, functional requirements mapping to the requested architecture, and measurable success criteria. I also generated a quality checklist to verify that all requirements are testable and unambiguous.

## Outcome

- âœ… Impact: Established authoritative specification for the Todo CLI app.
- ğŸ§ª Tests: n/a
- ğŸ“ Files: `specs/001-todo-cli-app/spec.md`, `specs/001-todo-cli-app/checklists/requirements.md`
- ğŸ” Next prompts: Run `/sp.plan` to design the implementation.
- ğŸ§  Reflection: The user's prompt was highly detailed, allowing for a precise specification with standard defaults.

## Evaluation notes (flywheel)

- Failure modes observed: none
- Graders run and results (PASS/FAIL): PASS
- Prompt variant (if applicable): default
- Next experiment (smallest change to try): implementation planning.
